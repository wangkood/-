<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1,target-densitydpi=320,width=640,user-scalable=no">
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- 字体库 -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
	
    <title>手势侧边栏</title>
	
	<style>
		body{
			padding: 0px;
			margin: 0px;
			overflow:hidden;
		}
		#menu{
			background-color:gray;
			position: absolute;
			overflow:auto;
                
		}
		
		#main{
			background-color:yellow;
			position: absolute;
			overflow:auto;
	
		}
		
	

	</style>
    
</head>
<body id="body">
	
		
	<nav id="menu">
		<ul class="menu">
			<li>
				<i class="fa fa-home"></i>
				<span text="main">主页</span>
			</li>
			<li>
				<i class="fa fa-address-book"/></i>
				<span text="">客户管理</span>
				<ul>
					<li>
						<i class="fa fa-users"></i>
						<span text="linkman_list">客户列表</span>
					</li>
					<li>
						<i class="fa fa-user-circle"></i>
						<span text="baifangdata">拜访数据</span>
					</li>
					<li>
						<i class="fa fa-thumbs-up"></i>
						<span>置顶客户</span>
						<ul>
							<li>
								<i class="fa fa-user"></i>
								<span text="zhangshan">张三</span>
							</li>
							<li>
								<i class="fa fa-user"></i>
								<span text="">李四</span>
							</li>
						</ul>
					</li>
				</ul>
			</li>
			<li>
				<i class="fa fa-tty"></i>
				<span text="">个人助理</span>
				<ul>
					<li><i class="fa fa-user"></i><span text="">1</span></li>
					<li><i class="fa fa-user"></i><span text="">2</span></li>
					<li><i class="fa fa-user"></i><span text="">3</span></li>
				</ul>
			</li>
			<li>
				<i class="fa fa-cog"></i>
				<span text="oboutMe">我</span>
			</li>
		</ul>
		<style>
	
			/*
				移除ul和li标签默认样式
			*/
			.menu ul, 
			.menu li{ 
				padding:0;
				margin:0;
				list-style:none
			}
			
			.menu{
				border:	1px soild black;
				width : 100%;
				padding: 0px;
				margin: 0px;
				background-color: #1c232f;
				color: #ccc;
			}
			
			.menu>li{ /*第一级菜单项*/
				
				padding-left:10px;
				line-height: 50px; /*行内元素不能设置高度，但可以设置行高*/
			  
			}
			
			.menu>li>ul>li{ /*第二级菜单项*/
				
				padding-left:20px;
				line-height: 50px;
			  
			}
			
			.menu>li>ul>li>ul>li{ /*第三级菜单项*/
				
				padding-left:30px;
				line-height: 50px; 
			  
			}
			
			
			.menu ul{
				display : none; /* 初始化隐藏所有子项 */
			}
			
		</style>
	</nav>	
	<nav id="main" src="https://www.baidu.com/">
		<button onclick="openMenu()">打开菜单</button>
		<button onclick="closeMenu()">关闭菜单</button>

		<button onclick="fullScreen()">进入全屏</button>
		<button onclick="exitFullScreen()">退出全屏</button>
		
		<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
		
		<div>
			第一卦 乾 乾为天 乾上乾下

			乾：元，亨，利，贞。

			初九：潜龙，勿用。九二：见龙再田，利见大人。九三：君子终日乾乾，夕惕若，厉无 咎。九四：或跃在渊，无咎。九五：飞龙在天，利见大人。上九：亢龙有悔。用九：见群龙 无首，吉。

			彖曰：大哉乾元，万物资始，乃统天。云行雨施，品物流形。大明始终，六位时成，时 乘六龙以御天。乾道变化，各正性命，保合大和，乃利贞。首出庶物，万国咸宁。

			象曰：天行健，君子以自强不息。潜龙勿用，阳在下也。见龙再田，德施普也。终日乾 乾，反复道也。或跃在渊，进无咎也。飞龙在天，大人造也。亢龙有悔，盈不可久也。用 九，天德不可为首也。

			文言曰：「元者，善之长也，亨者，嘉之会也，利者，义之和也，贞者，事之干也。君 子体仁，足以长人；嘉会，足以合礼；利物，足以和义；贞固，足以干事。君子行此四者， 故曰：乾：元亨利贞。」

			初九曰：「潜龙勿用。」何谓也？子曰：「龙德而隐者也。不易乎世，不成乎名；遯 世而无闷，不见是而无闷；乐则行之，忧则违之；确乎其不可拔，乾龙也。」

			九二曰：「见龙在田，利见大人。」何谓也？子曰：「龙德而正中者也。庸言之信，庸 行之谨，闲邪存其诚，善世而不伐，德博而化。易曰：「见龙在田，利见大人。」君德 也。」

			九三曰：「君子终日乾乾，夕惕若，厉无咎。」何谓也？子曰：「君子进德修业，忠 信，所以进德也。修辞立其诚，所以居业也。知至至之，可与几也。知终终之，可与存义 也。是故，居上位而不骄，在下位而不忧。故乾乾，因其时而惕，虽危而无咎矣。」

			九四：「或跃在渊，无咎。」何谓也？子曰：「上下无常，非为邪也。进退无恒，非离 群也。君子进德修业，欲及时也，故无咎。」

			九五曰：「飞龙在天，利见大人。」何谓也？子曰：「同声相应，同气相求；水流湿， 火就燥；云从龙，风从虎。圣人作，而万物覩，本乎天者亲上，本乎地者亲下，则各从其 类也。

			上九曰：「亢龙有悔。」何谓也？子曰：「贵而无位，高而无民，贤人在下而无辅，是 以动而有悔也。」

			乾龙勿用，下也。见龙在田，时舍也。终日乾乾，行事也。或跃在渊，自试也。飞龙在 天，上治也。亢龙有悔，穷之灾也。乾元用九，天下治也。

			乾龙勿用，阳气潜藏。见龙在田，天下文明。终日乾乾，与时偕行。或跃在渊，乾道乃 革。飞龙在天，乃位乎天德。亢龙有悔，与时偕极。乾元用九，乃见天则。

			乾元者，始而亨者也。利贞者，性情也。乾始能以美利利天下，不言所利。大矣哉！大 哉乾乎？刚健中正，纯粹精也。六爻发挥，旁通情也。时乘六龙，以御天也。云行雨施，天 下平也。

			君子以成德为行，日可见之行也。潜之为言也，隐而未见，行而未成，是以君子弗用 也。

			君子学以聚之，问以辩之，宽以居之，仁以行之。易曰：「见龙在田，利见大人。」君 德也。

			九三，重刚而不中，上不在天，下不在田。故乾乾，因其时而惕，虽危无咎矣。

			九四，重刚而不中，上不在天，下不在田，中不在人，故或之。或之者，疑之也，故无 咎。

			夫大人者，与天地合其德，与日月合其明，与四时合其序，与鬼神合其吉凶。先天下而 天弗违，后天而奉天时。天且弗违，而况於人乎？况於鬼神乎？

			亢之为言也，知进而不知退，知存而不知亡，知得而不知丧。其唯圣人乎？知进退存 亡，而不失其正者，其为圣人乎？
		</div>
	</nav>

	<script>
		function fullScreen( ) {
			var el = document.documentElement;
			var rfs = el.requestFullScreen ||
					el.webkitRequestFullScreen ||
					el.mozRequestFullScreen ||
					el.msRequestFullScreen;
			if (rfs) { //typeof rfs != "undefined" && rfs
				rfs.call(el);
			} else if (typeof window.ActiveXObject != "undefined") {
				//for IE，这里其实就是模拟了按下键盘的F11，使浏览器全屏
				var wscript = new ActiveXObject("WScript.Shell");
				if (wscript != null) {
					wscript.SendKeys("{F11}");
				}
			}
		}

		function exitFullScreen( ) {
			var el = document;
			var cfs = el.cancelFullScreen ||
					el.webkitCancelFullScreen ||
					el.mozCancelFullScreen ||
					el.exitFullScreen;
			if (cfs) {
				//typeof cfs != "undefined" && cfs
				cfs.call(el);
			} else if (typeof window.ActiveXObject != "undefined") {
				//for IE，这里和fullScreen相同，模拟按下F11键退出全屏
				var wscript = new ActiveXObject("WScript.Shell");
				if (wscript != null) {
					wscript.SendKeys("{F11}");
				}
			}
		}
	</script>


	<script type="text/javascript">
		
		/*
			当菜单项发生点击事件时会触发此方法
		*/
		function itemOnclik(textValue,isFinally){ //text的值 最终项吗
			console.log( textValue+"__"+isFinally );
			
		}
		
		
		
		var myMenu = document.querySelector(".menu"); //菜单
		
		var allLiArr = myMenu.getElementsByTagName("li");	//所有菜单项
		
	
		
		for(var v = 0 ; v<allLiArr.length ; v++){
		
			if( allLiArr[v].getElementsByTagName("ul").length < 1 ){//最终子类
				allLiArr[v].onclick=function(event){  //绑定事件
					var textValue = event.currentTarget.getElementsByTagName("span")[0].getAttribute("text");//text值
					itemOnclik(textValue,true);
					event.stopPropagation(); //阻止冒泡
				}
			}else{//父亲级菜单
				allLiArr[v].onclick=function(event){  //绑定事件
					var textValue = event.currentTarget.getElementsByTagName("span")[0].getAttribute("text");//text值
					itemOnclik(textValue,false);
					event.stopPropagation(); //阻止冒泡
					
					//打开菜单or关闭菜单
					var Eledisplay = event.currentTarget.getElementsByTagName("ul")[0].style.display;
					
					if( Eledisplay != "inline"){
						event.currentTarget.getElementsByTagName("ul")[0].style.display = "inline";
					}else{
						event.currentTarget.getElementsByTagName("ul")[0].style.display = "none";
					}
					
			
				}
			}
			
		}	
		
		
	</script>



	<script>
		
		initSide({
			menu:	"menu",	//菜单组件id值
			main:	"main",	//主界面组件id值
			width:	250,	//菜单组件宽度
			change:	1000,	//当屏幕宽度大于多少时改变模式
			touchArea: 60	//触摸区域，打开菜单
		});
		
		//静态
		var menu;	//菜单对象
		var main; 	//主界面对象
		var mode_change;	//当屏幕宽度超过多少时自动展开菜单栏
		var menu_width;		//菜单的宽度
		var touchArea;
		//动态
		var menu_isOpen;	//菜单是否打开
		var main_x;			//菜单的x轴值
		var page_width;		//页面宽度
		var page_height;	//页面高度
		
		//定时器
		var t1=window.setInterval(function() {
		  console.log("菜单开启-"+menu_isOpen +"\t 主菜单x轴位置-"+ main_x);
		}, 50);
		
		
		//打开菜单
		function openMenu(){
			if(true){
				main.style.width = page_width >= mode_change ?  (page_width - menu_width +"px") : (page_width +"px")
				main.style.left = menu_width+"px";
				menu_isOpen = true;
				main_x = menu_width;
			}
		}
		
		//关闭菜单
		function closeMenu(){
			if(true){
				console.log(page_width+".."+menu_width);
				main.style.width = page_width +"px";
				main.style.left = "0px";
				menu_isOpen = false;
				main_x = 0;
			}
		}
		
		//初始化侧边栏
		function initSide(side){
			//初始化值 静态
			menu = document.getElementById(side.menu);
			main = document.getElementById(side.main);
			mode_change = side.change;	
			menu_width  = side.width;
			touchArea = side.touchArea;
			//动态
			menu_isOpen = false;	
			main_x = null;	
			page_width =  document.documentElement.clientWidth; 	
			page_height = document.documentElement.clientHeight;	 
			
			//初始化 菜单 宽和高
			menu.style.width  = menu_width+"px";
			menu.style.height = page_height+'px';
			
			//初始化 主界面 	宽 高 位置 菜单栏状态 主界面x位置
			main.style.height = page_height+'px';
			if(page_width >= mode_change){
				//如果页面宽度 大于 用户模式改变值
				main.style.width= page_width - menu_width +"px";
				main.style.left	= menu_width +"px";
				menu_isOpen		= true;
				main_x			= menu_width;
			}else{
				main.style.width= page_width +"px";
				main.style.left	= "0px";
				menu_isOpen		= false;
				main_x			= 0;
			}
			
			
			//当页面大小改变时调用此方法
			window.onresize = function(){
				page_width =  document.documentElement.clientWidth;  //刷新页面宽
				page_height = document.documentElement.clientHeight; //刷新页面高
				
				//刷新 菜单 	宽 高
				menu.style.width  = menu_width+"px";
				menu.style.height = page_height+'px';
				
				//刷新 主界面 	宽 高 位置 菜单栏状态 主界面x位置
				main.style.height = page_height+'px';
				if(page_width >= mode_change){
					//如果页面宽度 大于 用户模式改变值
					main.style.width= page_width - menu_width +"px";
					main.style.left	= menu_width +"px";
					menu_isOpen		= true;
					main_x			= menu_width;
				}else{
					main.style.width= page_width +"px";
					main.style.left	= "0px";
					menu_isOpen		= false;
					main_x			= 0;
				}
			}
			
			
			/*
				实现滑动功能
			*/
			
			var start_x; //开始触摸的x坐标
			var start_y; //开始触摸的y坐标
			
			var activeSwap = false; //是否激活了滑动
			
			
			
			// 控制main移动
			function moveMain (move_x){
				
				//算出移动距离
				var distance = move_x  - start_x;
				
				//为了让 主界面 在限定位置移动
				if( (distance < 0 && distance > -menu_width && menu_isOpen) ){ //关闭菜单
					main.style.left = main_x = (menu_width + distance) +"px";
					
				}
				
				if(  (distance > 0 && distance < menu_width && !menu_isOpen) ){//打开菜单
					main.style.left = main_x  = distance +"px";
				}
			}
			
			//触摸开始
			main.addEventListener("touchstart", function(e){
				start_x = e.targetTouches[0].pageX;
				start_y = e.targetTouches[0].pageY;
			});
			
			
			//触摸移动
			main.addEventListener("touchmove", function(e){
				//判断开始坐标是否在所规定滑动区域内    菜单关闭 || 菜单打开
				if( (start_x > 0 && start_x < touchArea && !menu_isOpen)  ||  (start_x>menu_width && menu_isOpen)  ){
					activeSwap = true;
					//交给movenMain
					moveMain( e.touches[0].pageX);
				}else{activeSwap = false;}
			});


			//触摸停止
			main.addEventListener("touchend", function(e){
				
				
				if(activeSwap){
					var end_x = e.changedTouches[0].pageX;
					var end_y = e.changedTouches[0].pageY;

					if(menu_isOpen){//菜单为开启状态
						if(  ((start_x - end_x) > ( menu_width/2)) ){ //符合规定滑动距离
							closeMenu();
						}else{
							openMenu();
						}

					}else{//关闭状态
						if(  ((end_x - start_x) > menu_width/2) ){
							openMenu();
						}else{
							closeMenu();
						}
					}
				}
				activeSwap = false; //关闭滑动
			});
		}
	</script>
</body>
</html>