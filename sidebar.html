<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1,target-densitydpi=320,width=640,user-scalable=no">
	
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <title>haha</title>
	
	<style>
		body{
			padding: 0px;
			margin: 0px;
			overflow:hidden;
		}
		#menu{
			background-color:gray;
			position: absolute;
			overflow:auto;
                
		}
		
		#main{
			background-color:yellow;
			position: absolute;
			overflow:auto;
	
		}
		
	

	</style>
    
</head>
<body id="body">
	
		
	<nav id="menu">
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
		<h1>XXXXXXXXXXXXXX</h1>
	</nav>	
	<nav id="main" src="https://www.baidu.com/">
		<button onclick="openMenu()">打开菜单</button>
		<button onclick="closeMenu()">关闭菜单</button>

		<button onclick="fullScreen()">进入全屏</button>
		<button onclick="exitFullScreen()">退出全屏</button>
		
		<input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
		
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		<h1>GGGGGGGGGGGGG</h1>
		
		
	</nav>

	<script>
		function fullScreen( ) {
			var el = document.documentElement;
			var rfs = el.requestFullScreen ||
					el.webkitRequestFullScreen ||
					el.mozRequestFullScreen ||
					el.msRequestFullScreen;
			if (rfs) { //typeof rfs != "undefined" && rfs
				rfs.call(el);
			} else if (typeof window.ActiveXObject != "undefined") {
				//for IE，这里其实就是模拟了按下键盘的F11，使浏览器全屏
				var wscript = new ActiveXObject("WScript.Shell");
				if (wscript != null) {
					wscript.SendKeys("{F11}");
				}
			}
		}

		function exitFullScreen( ) {
			var el = document;
			var cfs = el.cancelFullScreen ||
					el.webkitCancelFullScreen ||
					el.mozCancelFullScreen ||
					el.exitFullScreen;
			if (cfs) {
				//typeof cfs != "undefined" && cfs
				cfs.call(el);
			} else if (typeof window.ActiveXObject != "undefined") {
				//for IE，这里和fullScreen相同，模拟按下F11键退出全屏
				var wscript = new ActiveXObject("WScript.Shell");
				if (wscript != null) {
					wscript.SendKeys("{F11}");
				}
			}
		}
	</script>


	<script>
		
		initSide({
			menu:	"menu",	//菜单组件id值
			main:	"main",	//主界面组件id值
			width:	250,	//菜单组件宽度
			change:	1000,	//当屏幕宽度大于多少时改变模式
			touchArea: 60	//触摸区域，打开菜单
		});
		
		//静态
		var menu;	//菜单对象
		var main; 	//主界面对象
		var mode_change;	//当屏幕宽度超过多少时自动展开菜单栏
		var menu_width;		//菜单的宽度
		var touchArea;
		//动态
		var menu_isOpen;	//菜单是否打开
		var main_x;			//菜单的x轴值
		var page_width;		//页面宽度
		var page_height;	//页面高度
		
		//定时器
		var t1=window.setInterval(function() {
		  console.log("菜单开启-"+menu_isOpen +"\t 主菜单x轴位置-"+ main_x);
		}, 50);
		
		
		//打开菜单
		function openMenu(){
			if(true){
				main.style.left = menu_width+"px";
				menu_isOpen = true;
				main_x = menu_width;
			}
		}
		
		//关闭菜单
		function closeMenu(){
			if(true){
				main.style.left = "0px";
				menu_isOpen = false;
				main_x = 0;
			}
		}
		
		//初始化侧边栏
		function initSide(side){
			//初始化值 静态
			menu = document.getElementById(side.menu);
			main = document.getElementById(side.main);
			mode_change = side.change;	
			menu_width  = side.width;
			touchArea = side.touchArea;
			//动态
			menu_isOpen = false;	
			main_x = null;	
			page_width =  document.documentElement.clientWidth; 	
			page_height = document.documentElement.clientHeight;	 
			
			//初始化 菜单 宽和高
			menu.style.width  = menu_width+"px";
			menu.style.height = page_height+'px';
			
			//初始化 主界面 	宽 高 位置 菜单栏状态 主界面x位置
			main.style.height = page_height+'px';
			if(page_width >= mode_change){
				//如果页面宽度 大于 用户模式改变值
				main.style.width= page_width - menu_width +"px";
				main.style.left	= menu_width +"px";
				menu_isOpen		= true;
				main_x			= menu_width;
			}else{
				main.style.width= page_width +"px";
				main.style.left	= "0px";
				menu_isOpen		= false;
				main_x			= 0;
			}
			
			
			//当页面大小改变时调用此方法
			window.onresize = function(){
				page_width =  document.documentElement.clientWidth;  //刷新页面宽
				page_height = document.documentElement.clientHeight; //刷新页面高
				
				//刷新 菜单 	宽 高
				menu.style.width  = menu_width+"px";
				menu.style.height = page_height+'px';
				
				//刷新 主界面 	宽 高 位置 菜单栏状态 主界面x位置
				main.style.height = page_height+'px';
				if(page_width >= mode_change){
					//如果页面宽度 大于 用户模式改变值
					main.style.width= page_width - menu_width +"px";
					main.style.left	= menu_width +"px";
					menu_isOpen		= true;
					main_x			= menu_width;
				}else{
					main.style.width= page_width +"px";
					main.style.left	= "0px";
					menu_isOpen		= false;
					main_x			= 0;
				}
			}
			
			
			/*
				实现滑动功能
			*/
			
			var start_x; //开始触摸的x坐标
			var start_y; //开始触摸的y坐标
			
			var activeSwap = false; //是否激活了滑动
			
			
			
			// 控制main移动
			function moveMain (move_x){
				
				//算出移动距离
				var distance = move_x  - start_x;
				
				//为了让 主界面 在限定位置移动
				if( (distance < 0 && distance > -menu_width && menu_isOpen) ){ //关闭菜单
					main.style.left = main_x = (menu_width + distance) +"px";
					
				}
				
				if(  (distance > 0 && distance < menu_width && !menu_isOpen) ){//打开菜单
					main.style.left = main_x  = distance +"px";
				}
			}
			
			//触摸开始
			main.addEventListener("touchstart", function(e){
				start_x = e.targetTouches[0].pageX;
				start_y = e.targetTouches[0].pageY;
			});
			
			
			//触摸移动
			main.addEventListener("touchmove", function(e){
				//判断开始坐标是否在所规定滑动区域内    菜单关闭 || 菜单打开
				if( (start_x > 0 && start_x < touchArea && !menu_isOpen)  ||  (start_x>menu_width && menu_isOpen)  ){
					activeSwap = true;
					//交给movenMain
					moveMain( e.touches[0].pageX);
				}else{activeSwap = false;}
			});


			//触摸停止
			main.addEventListener("touchend", function(e){
				
				
				if(activeSwap){
					var end_x = e.changedTouches[0].pageX;
					var end_y = e.changedTouches[0].pageY;

					if(menu_isOpen){//菜单为开启状态
						if(  ((start_x - end_x) > ( menu_width/2)) ){ //符合规定滑动距离
							closeMenu();
						}else{
							openMenu();
						}

					}else{//关闭状态
						if(  ((end_x - start_x) > menu_width/2) ){
							openMenu();
						}else{
							closeMenu();
						}
					}
				}
				activeSwap = false; //关闭滑动
			});
		}
	</script>
</body>
</html>